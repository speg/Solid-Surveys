((function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o;k=function(){var a,c,d,e,f,g,h,i,j,k,l,m;console.log("Building Question...");b.print();d=0;m=b.chain;for(i=0,k=m.length;i<k;i++){h=m[i];console.log(h.text,b.buffer[d]);d+=1}c=b.buffer;switch(c.shift()){case"1":g="text";break;case"2":g="mc";break;case"3":g="checkbox";break;default:g=!1}if(!g)return!1;f=c.shift();for(j=0,l=c.length;j<l;j++){e=c[j];e>0&&(a=2)}console.log("Making a ",g," question titled: ",f);return!0};j=function(){var a,c,d,e,f,g,h;console.log("Building MC Question");a=b.buffer;if(a.shift()!=="2")return!1;d=a.shift();console.log("Question title:",d);c=[];f=0;for(g=0,h=a.length;g<h;g++){e=a[g];switch(e){case"1":f=1;break;case"0":f=0;break;default:switch(f){case 1:c.push(e)}}}return console.log("choices",c)};i={};i.password={text:"Please enter your password:",validation:/.+/,error:"Your password must not be empty.",pre:function(){return e.type="password"},next:"homeScreen",action:function(a){return e.type="text"}};i.logIn={text:"Please enter your email address:",validation:/.+@.+\..+/,error:"Must be a valid email address.",next:"password"};i.nameSurvey={text:"Enter a name for your survey:",validation:/.+/,error:"You must enter a name for your survey",next:"editSurvey"};i.newQuestion={text:"What kind of question do you want to add?",options:[{text:"Text Input",next:"QuestionTitle",action:function(){return c.queue("textInputOptions")}},{text:"Multiple Choice",next:"QuestionTitle",action:function(){return c.queue("mcOptions")}},{text:"Checkbox"},{text:"Descriptive Text"}]};i.homeScreen={text:"What would you like to do?",options:[{text:"Create a new survey",next:"nameSurvey"},{text:"View saved surveys",action:function(){return console.log("viewing")}}]};i.editSurvey={text:"What would you like to do?",options:[{text:"Add a Question",next:"newQuestion"}],action:function(){return b.clear()}};i.QuestionTitle={text:"Enter your question:"};i.textInputOptions={text:"Would you like to add any options to your text input question?",pre:function(){return c.queue("textInputOptions")},options:[{text:"Make textarea",action:function(){console.log("make textarea");return!0}}],end:"editSurvey",action:function(a){if(a==="0"||a==="DONE"){c._queue.pop();return k()}}};i.mcOptions={text:"What would you like to do next?",pre:function(){return c.queue("mcOptions")},options:[{text:"Add Choice",next:"addChoice"}],end:"editSurvey",action:function(a){if(a==="0"||a==="DONE"){c._queue.pop();return j()}}};i.addChoice={text:"Enter name of choice:"};"use strict";e=document.getElementById("input");h=document.getElementById("question");f=document.getElementById("options");a=document.getElementById("answer");d=document.getElementById("error");g={};c={_queue:[],queue:function(a){return this._queue.push(a)},next:function(){return this._queue.shift()}};b={buffer:[],chain:[],description:"nothing",length:function(){return this.buffer.length},push:function(a){return this.buffer.push(a)},clear:function(){this.buffer=[];return this.chain=[]},print:function(){console.log("*** BUFFER ***");console.log(this.description);console.log(this.chain);console.log(this.buffer);return console.log(c._queue)}};input.focus();n=function(a){g.options&&delete g.next;g=a;b.chain.push(a);g.pre&&g.pre();h.innerHTML=a.text;a.options?f.innerHTML=m(a.options):f.innerHTML="";a.end&&(f.innerHTML+=" 0 - Done");e.value="";return e.focus()};m=function(a){var b,c,d,e,f;c="";b=1;for(e=0,f=a.length;e<f;e++){d=a[e];c+=""+b+". "+d.text+" ";b+=1}return c};o=function(){var a,d,f;f=e.value;e.value="";b.push(f);d=g.next;a=g.action;if(arguments[0]){d=g.options[arguments[0]-1].next||g.next||null;a=g.options[arguments[0]-1].action||g.action||null}arguments[0]===0&&(d=g.end);a&&a(f);return n(i[d||c.next()])};l=function(a){var b;d.innerHTML="";if(a.keyCode===13)return g.validation?g.validation.test(e.value)?o():d.innerHTML=g.error||"Invalid input. Please try again.":o();if(!(!g.end||e.value!=="0"&&e.value.toUpperCase()!=="DONE"))return o(0);if(g.options){if(/[0-9]/.test(e.value)&&parseInt(e.value,10)<=g.options.length){b=parseInt(e.value,10);return o(b)}return d.innerHTML=g.error||"Please enter a number 1 - "+g.options.length}};e.addEventListener("keyup",function(a){return l(a)});document.addEventListener("click",function(){return e.focus()});n(i.editSurvey)})).call(this);